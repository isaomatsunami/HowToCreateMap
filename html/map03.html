<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
<script src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
<title>Leaflet骨格コード</title>
</head>
<style>
#map1 { height: 400px; }
h2 {font-size:24px;margin:2% 5%;}
</style>
<body>
<div class="page">
	<h2>ボタンの実装１</h2>
	<div id="map1"></div>
	<button id="zenhan">前半非表示</button>
	<button id="kouhan">後半非表示</button>
</div>
<script>
window.onload = function(){
	var map_object = L.map("map1").setView([35.671230, 139.754448], 14);
	var user_id = "pk.eyJ1Ijoic29uZ2JvZ29uZyIsImEiOiJRRHZKbW1rIn0.GkAtUDV0JvT43uJBuufp8w";
	var HaikeiMap = L.tileLayer(
		'https://api.mapbox.com/styles/v1/mapbox/streets-v9/tiles/256/{z}/{x}/{y}?access_token=' + user_id,
		{
			attribution: '地図データ:OpenStreetMap',
			maxZoom: 18
		});
	HaikeiMap.addTo(map_object);
	var marker = L.marker([35.671230, 139.754448]);
	marker.addTo(map_object);
	marker.bindPopup("<b>日本記者クラブ</b><br>");
	var marathonLines = L.geoJson( geojson_data, {
    	style: function (feature) {
        	return {color: "blue"};
    	}
	})
	// 最初は全コースが表示される
	marathonLines.addTo(map_object);
	// コースが表示されているかどうかを記憶しておく変数を用意します
	var state_zenhan = "表示中";
	var state_kouhan = "表示中";
	// ボタンをプログラムで「つかんで」おきます
	var button_zenhan = document.getElementById("zenhan");
	var button_kouhan = document.getElementById("kouhan");
	// ボタンが押された時に実行されるコード
	button_zenhan.addEventListener("click", function(){
		if( state_zenhan == "表示中" ){
			// 現在表示中なら表示を消し
			for( k in marathonLines._layers ){
				if( marathonLines._layers[k].feature.properties.end <= 20 ){
					// もしendが20以下だったら、それは前半部分なので、非表示にする(不透明度を0にする)
					marathonLines._layers[k]._path.style.opacity = 0.0;
				}
			}
			// ボタンは表示を促すようにし
			button_zenhan.innerText = "前半を表示";
			// 変数も非表示にします
			state_zenhan = "非表示";
		}else{
			// 現在非表示なら表示させる
			for( k in marathonLines._layers ){
				if( marathonLines._layers[k].feature.properties.end <= 20 ){
					// もしendが20以下だったら、それは前半部分なので、表示にする(不透明度を1にする)
					marathonLines._layers[k]._path.style.opacity = 1.0;
				}
			}
			// ボタンを非表示を促すようにし
			button_zenhan.innerText = "前半非表示";
			// 変数を表示にする
			state_zenhan = "表示中";			
		}
	});
	// 後半部分も同様
	button_kouhan.addEventListener("click", function(){
		if( state_kouhan == "表示中" ){
			// 現在表示中なら表示を消し
			for( k in marathonLines._layers ){
				if( marathonLines._layers[k].feature.properties.end > 20 ){
					// もしendが20より大だったら、それは後半部分なので、非表示にする(不透明度を0にする)
					marathonLines._layers[k]._path.style.opacity = 0.0;
				}
			}
			// ボタンは表示を促すようにし
			button_kouhan.innerText = "後半を表示";
			// 変数も非表示にします
			state_kouhan = "非表示";
		}else{
			// 現在非表示なら表示させる
			for( k in marathonLines._layers ){
				if( marathonLines._layers[k].feature.properties.end > 20 ){
					// もしendが20より大だったら、それは後半部分なので、表示にする(不透明度を1にする)
					marathonLines._layers[k]._path.style.opacity = 1.0;
				}
			}
			// ボタンを非表示を促すようにし
			button_kouhan.innerText = "後半非表示";
			// 変数を表示にする
			state_kouhan = "表示中";			
		}
	});}

// geoJSONファイルの中身を変数に代入する
var geojson_data = {
"type": "FeatureCollection",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
                                                                                
"features": [
{ "type": "Feature", "properties": { "id": 1, "start": 0, "end": 5 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.692310660597173, 35.689655342465088 ], [ 139.691661468480788, 35.692190237820078 ], [ 139.694391404559951, 35.692609332757954 ], [ 139.696592831672575, 35.6920009684166 ], [ 139.696934073682485, 35.693226141866546 ], [ 139.697982768639747, 35.693631712379542 ], [ 139.699397674534424, 35.693726345202478 ], [ 139.700592021569065, 35.693814218437538 ], [ 139.703438479310137, 35.69317882517236 ], [ 139.705835496355263, 35.692516388506135 ], [ 139.706992389998561, 35.692144610415681 ], [ 139.708226271168485, 35.691867465620831 ], [ 139.710173847517666, 35.69161735851587 ], [ 139.7124626658767, 35.691374010309644 ], [ 139.713777696061186, 35.691232056846452 ], [ 139.714543409839507, 35.691360490943069 ], [ 139.715227974603238, 35.691448366784755 ], [ 139.715619154468271, 35.691434847430799 ], [ 139.716767725135696, 35.691259095620829 ], [ 139.717275426662638, 35.691306413453908 ], [ 139.72100411984394, 35.692259523828682 ], [ 139.722044491825329, 35.692529907676764 ], [ 139.723769428570449, 35.692421754247526 ], [ 139.725550545402598, 35.69227304304286 ], [ 139.725933402291759, 35.692191927723435 ], [ 139.727531413655186, 35.69142132807454 ], [ 139.728114021964728, 35.691292894075907 ], [ 139.730246784526599, 35.691130661360951 ], [ 139.731045790208299, 35.691130661360951 ], [ 139.731986286479469, 35.691292894075907 ], [ 139.734308396741937, 35.691853946337908 ], [ 139.734666284703536, 35.691982379433128 ], [ 139.735581812047144, 35.692489350157985 ], [ 139.736742867178378, 35.693334294205016 ], [ 139.737192307874352, 35.69373986416803 ], [ 139.738663393856029, 35.695509139007541 ], [ 139.739637182030634, 35.696928586145297 ], [ 139.740286374147018, 35.697645059391085 ] ] } },
{ "type": "Feature", "properties": { "id": 2, "start": 5, "end": 10 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.740369603905464, 35.69775320573693 ], [ 139.742666745240399, 35.700483852362566 ], [ 139.743598918535724, 35.701903210948529 ], [ 139.744181526845296, 35.702430394845102 ], [ 139.744664259444676, 35.702565569641713 ], [ 139.747560655040871, 35.700835314937507 ], [ 139.750007609941093, 35.698293935266186 ], [ 139.75260437840663, 35.697915424980714 ], [ 139.754460402021436, 35.697604504473567 ], [ 139.755359283413355, 35.695914697910702 ], [ 139.758055927589112, 35.69600932802468 ], [ 139.760611081175426, 35.696100578385384 ], [ 139.762575303476268, 35.694627041271843 ], [ 139.763074682027337, 35.694491853017176 ], [ 139.763990209371002, 35.69439722110257 ], [ 139.765388469313962, 35.694694635313233 ], [ 139.768617783944194, 35.695924836856854 ], [ 139.770507481376882, 35.695837851432266 ], [ 139.770274056138589, 35.695194829438989 ], [ 139.771609893762673, 35.69205166562228 ], [ 139.772991507753943, 35.688617702062771 ], [ 139.77458951911737, 35.684636011997981 ], [ 139.77458951911737, 35.684325039721642 ], [ 139.774306537938457, 35.683432677764273 ], [ 139.774111736986924, 35.683106332864533 ] ] } },
{ "type": "Feature", "properties": { "id": 3, "start": 10, "end": 15 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.774111736986924, 35.683106332864533 ], [ 139.773773867483953, 35.682540305826016 ], [ 139.780107652106693, 35.680015244789296 ], [ 139.781589141808183, 35.682530165178456 ], [ 139.788056094044521, 35.685656803776332 ], [ 139.786874231473661, 35.687258947315492 ], [ 139.785858828419833, 35.688529823102535 ], [ 139.784660319897256, 35.690314423007287 ], [ 139.784593736090443, 35.690740287538269 ], [ 139.785242928206856, 35.694809545052117 ], [ 139.785488455994482, 35.69618506936699 ], [ 139.787436032343635, 35.699280757204924 ], [ 139.789100627513875, 35.701632858880181 ], [ 139.790199260326233, 35.702707502931496 ], [ 139.793245469487772, 35.705208190877713 ], [ 139.794360748251819, 35.706411196593471 ], [ 139.795871368368807, 35.708540066712189 ], [ 139.796037827885812, 35.70966192459759 ], [ 139.796220933354533, 35.710891895217699 ], [ 139.797719069007741, 35.710716186291158 ], [ 139.797186398553265, 35.70982411961193 ], [ 139.796570498340287, 35.70910775580834 ] ] } },
{ "type": "Feature", "properties": { "id": 4, "start": 15, "end": 20 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.796570498340287, 35.70910775580834 ], [ 139.796004535982433, 35.708536687598318 ], [ 139.794523046280915, 35.706374025340359 ], [ 139.793840562261124, 35.705590045782252 ], [ 139.793357829661744, 35.705130467973994 ], [ 139.790195098838325, 35.702562190274591 ], [ 139.789362801253191, 35.701724102805741 ], [ 139.789545906721941, 35.701588926582481 ], [ 139.792525532076638, 35.701386161817901 ], [ 139.795222176252423, 35.700338535652932 ], [ 139.797186398553265, 35.700297982105297 ], [ 139.797486025683924, 35.696837336732031 ], [ 139.79791882042818, 35.69210236279573 ], [ 139.798268385413905, 35.688046487090681 ], [ 139.798634596351377, 35.683358313817308 ], [ 139.79910068299904, 35.679572421298481 ], [ 139.796370746919848, 35.676077071770813 ], [ 139.796170995499438, 35.674991927284388 ], [ 139.795987890030716, 35.674180594664186 ], [ 139.795355343866049, 35.673071760078081 ], [ 139.795355343866049, 35.673071760078081 ] ] } },
{ "type": "Feature", "properties": { "id": 5, "start": 20, "end": 25 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.795355343866049, 35.673071760078081 ], [ 139.794972486976889, 35.672419298381733 ], [ 139.8002825455699, 35.670106904138187 ], [ 139.801697451464605, 35.669755306163836 ], [ 139.801630867657764, 35.669606552708473 ], [ 139.800265899618211, 35.669971674331329 ], [ 139.794789381508139, 35.672378730638997 ], [ 139.79555509528646, 35.673649843446 ], [ 139.795871368368807, 35.674217780922966 ], [ 139.796220933354533, 35.676137920557473 ], [ 139.798967515385414, 35.679646788773965 ], [ 139.79870118015819, 35.682053553289265 ], [ 139.798168509703714, 35.688026207193992 ], [ 139.797269628311795, 35.697773483160454 ], [ 139.79703658498795, 35.70017294187025 ], [ 139.795255468155801, 35.700254049072093 ], [ 139.792432359810761, 35.701305807878832 ], [ 139.791082255620211, 35.701416181557356 ] ] } },
{ "type": "Feature", "properties": { "id": 6, "start": 25, "end": 30 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.790984162012649, 35.701420708091206 ], [ 139.789246279591282, 35.701551753080921 ], [ 139.787606653348575, 35.699226685086181 ], [ 139.785659076999423, 35.69614451370699 ], [ 139.785376095820453, 35.694765608995041 ], [ 139.784743549655758, 35.690794365411257 ], [ 139.784775676459702, 35.690417555402568 ], [ 139.785875474371551, 35.688698821017063 ], [ 139.788272491416649, 35.685623002933148 ], [ 139.781797216204467, 35.682499743228036 ], [ 139.780190881865195, 35.67983946781991 ], [ 139.773698960701324, 35.682435519072399 ], [ 139.771701446497048, 35.679217484665173 ], [ 139.768963187442012, 35.67485670575379 ], [ 139.767514989643928, 35.673450388254153 ] ] } },
{ "type": "Feature", "properties": { "id": 7, "start": 30, "end": 35 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.767465051788804, 35.673396298624674 ], [ 139.765034742840271, 35.671124501086517 ], [ 139.762487912229801, 35.672909490309927 ], [ 139.759583193657761, 35.67480261707739 ], [ 139.759333504382226, 35.67476205054605 ], [ 139.757685555163704, 35.673098805007363 ], [ 139.756204065462214, 35.67058020665808 ], [ 139.754988910987947, 35.66850441619939 ], [ 139.753390899624492, 35.665028867683347 ], [ 139.750665125033265, 35.65925736487285 ], [ 139.750265622192416, 35.65720833032146 ], [ 139.750049224820287, 35.654990174253449 ], [ 139.749666367931127, 35.652623171481878 ], [ 139.748838231833901, 35.647513587803878 ], [ 139.746940593339843, 35.646647868185958 ], [ 139.744997178478599, 35.645596141498039 ], [ 139.744131588990086, 35.645000945983874 ], [ 139.743349229260076, 35.644324582062914 ], [ 139.742783266902194, 35.643661739865394 ], [ 139.74181780170349, 35.642119595923347 ], [ 139.741035441973452, 35.640496254356478 ] ] } },
{ "type": "Feature", "properties": { "id": 8, "start": 35, "end": 40 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.741035441973452, 35.640496254356478 ], [ 139.73967047393387, 35.637878546617621 ], [ 139.739004635865797, 35.636309233685623 ], [ 139.738655070880014, 35.635375748446144 ], [ 139.738471965411321, 35.63542986383019 ], [ 139.739320908948116, 35.637607977620895 ], [ 139.740902274359826, 35.64057065823274 ], [ 139.741667988138147, 35.642214289830108 ], [ 139.742600161433472, 35.643729377076248 ], [ 139.743232707598168, 35.644459855305158 ], [ 139.744231464700306, 35.64527148994906 ], [ 139.745296805609257, 35.645961372913781 ], [ 139.746911462924373, 35.646854153790009 ], [ 139.748717548684084, 35.647659000725753 ], [ 139.749100405573245, 35.650066729701066 ], [ 139.749533200317501, 35.652616408516323 ], [ 139.749932703158379, 35.655023988070546 ], [ 139.750165746482196, 35.657235380624975 ], [ 139.750531957419639, 35.659345276070098 ], [ 139.753295185402237, 35.665194534422277 ], [ 139.753757110561963, 35.666188527636798 ] ] } },
{ "type": "Feature", "properties": { "id": 9, "start": 40, "end": 42195 }, "geometry": { "type": "LineString", "coordinates": [ [ 139.753757110561963, 35.666188527636798 ], [ 139.754839097422604, 35.668582174795567 ], [ 139.756070897848588, 35.670847283269978 ], [ 139.757552387550078, 35.673227268296323 ], [ 139.759283566527102, 35.674944599774733 ], [ 139.759616485561168, 35.674971644069402 ], [ 139.760931515745654, 35.674146788959355 ], [ 139.762196608075016, 35.678196610500237 ], [ 139.760981453600749, 35.678467042014212 ] ] } }
]
};

</script>
</body>
</html>